(function(){mui.init();var pageSize=10,pageNo=1,canPull=true;var trimVal=base.trimVal;var $guessUlike=base.$("#guessUlike");var page={init:function(){base.setPageRem();base.setMuiBackHeight();page.queryList();page.bind()},queryList:function(){var querySettings={url:Constants.newhouselist,data:{"pager.pageSize":pageSize,"pager.pageNo":pageNo,"parameters[cityID]":1},type:"post"};muiAjax(querySettings,function(data){var rows=data.rows;var rentlength=rows.length,totalLength=data.totalRows;if(rows.length>0){if(rentlength<pageSize){canPull=false}else if(totalLength==pageSize*(pageNo-1)+rentlength){canPull=false}else{canPull=true}var obj={rows:rows};var tmpl=mui("#rows-li-template")[0].innerHTML;mui("#guessUlike")[0].innerHTML+=Mustache.render(tmpl,obj)}else{canPull=false}},function(status){})},bind:function(){mui(".gueulike-wrapper").pullToRefresh({up:{callback:function(){var self=this;setTimeout(function(){if(canPull){pageNo+=1;page.queryList()}self.endPullUpToRefresh(!canPull)},500)}}});var muiBack=mui(".mui-back")[0];mui(document).on("tap",".slider-menu-choose li",function(){var cLocation=mui(".choose-location")[0];if(cLocation.style.display=="none"){base.Slider.slideDown(cLocation,100);muiBack.style.display="block"}else{base.Slider.slideUp(cLocation,100);muiBack.style.display="none"}}).on("tap","#guessUlike li",function(){var newHousingID=this.getAttribute("data-id");var pageObj={pageUrl:"newhousedetail.html?newHousingID="+newHousingID};pageChange(pageObj)})}};page.init()})();